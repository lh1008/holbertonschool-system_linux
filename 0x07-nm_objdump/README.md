# 0x07. C - ELF: nm/objdump

### Learning Objectives

- What is the ELF format
- What are the commands `nm` and `objdump`
- How to use them properly
- How to parse the content of an `ELF` file
- What information can be extracted from an `ELF` file
- What are the differences between `nm` and `objdump`

### Tasks

_**0. nm**_
Write a program that reproduces the `GNU nm` command.

_**1. objdump -sf **_
Write a program that reproduces the `GNU objdump` command.


### Instructions and Compiling

All the files have been compiled on `Ubuntu 20.04` using `gcc 8.4.0` and the flags `-Wall`, `-Werror`, `-Wextra`, and `-pedantic`.

Open up your terminal. Download the following files and locate them in a directory that you will like to try the code out:

- `wget -O 0-nm.c https://raw.githubusercontent.com/lh1008/holbertonschool-system_linux/main/0x07-nm_objdump/0-nm.c`
- `wget -O 1-ojdump.c https://raw.githubusercontent.com/lh1008/holbertonschool-system_linux/main/0x07-nm_objdump/0-objdump.c`
- `wget -O Makefile https://raw.githubusercontent.com/lh1008/holbertonschool-system_linux/main/0x07-nm_objdump/Makefile`

You should have installed [`make`](https://www.gnu.org/software/make/).

Run `make` in the directory you located the files:

`$ make`

You will have this output:

```
gcc -Wall -Werror -Wextra -pedantic 0-nm.c -o hnm
cp hnm test_file
touch 0-nm.c
gcc -Wall -Werror -Wextra -pedantic 1-objdump.c -o hobjdump
cp hobjdump test_file
touch 1-objdump.c
```

To test the executables run the following commands.

- To try the `nm` command with the `-p` option:

`$ ./hnm test_file`

You should get something like this:

```
00000000000010d0 t deregister_tm_clones
0000000000001100 t register_tm_clones
0000000000001140 t __do_global_dtors_aux
0000000000004010 b completed.7970
0000000000003db0 d __do_global_dtors_aux_fini_array_entry
0000000000001180 t frame_dummy
0000000000003da8 d __frame_dummy_init_array_entry
0000000000002174 r __FRAME_END__
0000000000003db0 d __init_array_end
0000000000003db8 d _DYNAMIC
0000000000003da8 d __init_array_start
000000000000202c r __GNU_EH_FRAME_HDR
0000000000003fa8 d _GLOBAL_OFFSET_TABLE_
0000000000001000 t _init
00000000000012a0 T __libc_csu_fini
                 w _ITM_deregisterTMCloneTable
0000000000004000 W data_start
0000000000004010 D _edata
00000000000012a8 T _fini
                 U __stack_chk_fail@@GLIBC_2.4
                 U __libc_start_main@@GLIBC_2.2.5
                 U execve@@GLIBC_2.2.5
0000000000004000 D __data_start
                 w __gmon_start__
0000000000004008 D __dso_handle
0000000000002000 R _IO_stdin_used
0000000000001230 T __libc_csu_init
0000000000004018 B _end
00000000000010a0 T _start
0000000000004010 B __bss_start
0000000000001189 T main
                 U perror@@GLIBC_2.2.5
0000000000004010 D __TMC_END__
                 w _ITM_registerTMCloneTable
                 w __cxa_finalize@@GLIBC_2.2.5
```

- To try the `objdump` command with the `-sf` option:

`$ ./hobjdump test_file`

You should get something like this:

```

test_file:     file format elf64-x86-64
architecture: i386:x86-64, flags 0x00000150:
HAS_SYMS, DYNAMIC, D_PAGED
start address 0x00000000000010a0

Contents of section .interp:
 0318 2f6c6962 36342f6c 642d6c69 6e75782d  /lib64/ld-linux-
 0328 7838362d 36342e73 6f2e3200           x86-64.so.2.    
Contents of section .note.gnu.property:
 0338 04000000 10000000 05000000 474e5500  ............GNU.
 0348 020000c0 04000000 03000000 00000000  ................
Contents of section .note.gnu.build-id:
 0358 04000000 14000000 03000000 474e5500  ............GNU.
 0368 26e1a93d e08d9347 01a80a71 ddba3985  &..=...G...q..9.
 0378 11e77b7f                             ..{.            
Contents of section .note.ABI-tag:
 037c 04000000 10000000 01000000 474e5500  ............GNU.
 038c 00000000 03000000 02000000 00000000  ................
Contents of section .gnu.hash:
 03a0 02000000 08000000 01000000 06000000  ................
 03b0 00008100 00000000 08000000 00000000  ................
 03c0 d165ce6d                             .e.m            
Contents of section .dynsym:
 03c8 00000000 00000000 00000000 00000000  ................
 03d8 00000000 00000000 61000000 20000000  ........a... ...
 03e8 00000000 00000000 00000000 00000000  ................
 03f8 12000000 12000000 00000000 00000000  ................
 0408 00000000 00000000 39000000 12000000  ........9.......
 0418 00000000 00000000 00000000 00000000  ................
 0428 23000000 12000000 00000000 00000000  #...............
 0438 00000000 00000000 7d000000 20000000  ........}... ...
 0448 00000000 00000000 00000000 00000000  ................
 0458 0b000000 12000000 00000000 00000000  ................
 0468 00000000 00000000 8c000000 20000000  ............ ...
 0478 00000000 00000000 00000000 00000000  ................
 0488 2a000000 22000000 00000000 00000000  *..."...........
 0498 00000000 00000000                    ........        
Contents of section .dynstr:
 04a0 006c6962 632e736f 2e360070 6572726f  .libc.so.6.perro
 04b0 72005f5f 73746163 6b5f6368 6b5f6661  r.__stack_chk_fa
 04c0 696c0065 78656376 65005f5f 6378615f  il.execve.__cxa_
 04d0 66696e61 6c697a65 005f5f6c 6962635f  finalize.__libc_
 04e0 73746172 745f6d61 696e0047 4c494243  start_main.GLIBC
 04f0 5f322e32 2e350047 4c494243 5f322e34  _2.2.5.GLIBC_2.4
 0500 005f4954 4d5f6465 72656769 73746572  ._ITM_deregister
 0510 544d436c 6f6e6554 61626c65 005f5f67  TMCloneTable.__g
 0520 6d6f6e5f 73746172 745f5f00 5f49544d  mon_start__._ITM
 0530 5f726567 69737465 72544d43 6c6f6e65  _registerTMClone
 0540 5461626c 6500                        Table.          
Contents of section .gnu.version:
 0546 00000000 02000300 03000000 03000000  ................
 0556 0300                                 ..              
Contents of section .gnu.version_r:
 0558 01000200 01000000 10000000 00000000  ................
 0568 751a6909 00000300 4b000000 10000000  u.i.....K.......
 0578 1469690d 00000200 57000000 00000000  .ii.....W.......
Contents of section .rela.dyn:
 0588 a83d0000 00000000 08000000 00000000  .=..............
 0598 80110000 00000000 b03d0000 00000000  .........=......
 05a8 08000000 00000000 40110000 00000000  ........@.......
 05b8 08400000 00000000 08000000 00000000  .@..............
 05c8 08400000 00000000 d83f0000 00000000  .@.......?......
 05d8 06000000 01000000 00000000 00000000  ................
 05e8 e03f0000 00000000 06000000 03000000  .?..............
 05f8 00000000 00000000 e83f0000 00000000  .........?......
 0608 06000000 05000000 00000000 00000000  ................
 0618 f03f0000 00000000 06000000 07000000  .?..............
 0628 00000000 00000000 f83f0000 00000000  .........?......
 0638 06000000 08000000 00000000 00000000  ................
Contents of section .rela.plt:
 0648 c03f0000 00000000 07000000 02000000  .?..............
 0658 00000000 00000000 c83f0000 00000000  .........?......
 0668 07000000 04000000 00000000 00000000  ................
 0678 d03f0000 00000000 07000000 06000000  .?..............
 0688 00000000 00000000                    ........        
Contents of section .init:
 1000 f30f1efa 4883ec08 488b05d9 2f000048  ....H...H.../..H
 1010 85c07402 ffd04883 c408c3             ..t...H....     
Contents of section .plt:
 1020 ff358a2f 0000f2ff 258b2f00 000f1f00  .5./....%./.....
 1030 f30f1efa 68000000 00f2e9e1 ffffff90  ....h...........
 1040 f30f1efa 68010000 00f2e9d1 ffffff90  ....h...........
 1050 f30f1efa 68020000 00f2e9c1 ffffff90  ....h...........
Contents of section .plt.got:
 1060 f30f1efa f2ff258d 2f00000f 1f440000  ......%./....D..
Contents of section .plt.sec:
 1070 f30f1efa f2ff2545 2f00000f 1f440000  ......%E/....D..
 1080 f30f1efa f2ff253d 2f00000f 1f440000  ......%=/....D..
 1090 f30f1efa f2ff2535 2f00000f 1f440000  ......%5/....D..
Contents of section .text:
 10a0 f30f1efa 31ed4989 d15e4889 e24883e4  ....1.I..^H..H..
 10b0 f050544c 8d05e601 0000488d 0d6f0100  .PTL......H..o..
 10c0 00488d3d c1000000 ff15122f 0000f490  .H.=......./....
 10d0 488d3d39 2f000048 8d05322f 00004839  H.=9/..H..2/..H9
 10e0 f8741548 8b05ee2e 00004885 c07409ff  .t.H......H..t..
 10f0 e00f1f80 00000000 c30f1f80 00000000  ................
 1100 488d3d09 2f000048 8d35022f 00004829  H.=./..H.5./..H)
 1110 fe48c1fe 034889f0 48c1e83f 4801c648  .H...H..H..?H..H
 1120 d1fe7414 488b05c5 2e000048 85c07408  ..t.H......H..t.
 1130 ffe0660f 1f440000 c30f1f80 00000000  ..f..D..........
 1140 f30f1efa 803dc52e 00000075 2b554883  .....=.....u+UH.
 1150 3da22e00 00004889 e5740c48 8b3da62e  =.....H..t.H.=..
 1160 0000e8f9 feffffe8 64ffffff c6059d2e  ........d.......
 1170 0000015d c30f1f00 c30f1f80 00000000  ...]............
 1180 f30f1efa e977ffff fff30f1e fa554889  .....w.......UH.
 1190 e54883ec 50897dcc 488975c0 488955b8  .H..P.}.H.u.H.U.
 11a0 64488b04 25280000 00488945 f831c048  dH..%(...H.E.1.H
 11b0 8d054e0e 00004889 45d0488d 054e0e00  ..N...H.E.H..N..
 11c0 00488945 d8488d05 470e0000 488945e0  .H.E.H..G...H.E.
 11d0 48c745e8 00000000 488b45c0 488b4008  H.E.....H.E.H.@.
 11e0 488945e0 488b55b8 488d45d0 4889c648  H.E.H.U.H.E.H..H
 11f0 8d3d1e0e 0000e885 feffff83 f8ff7513  .=............u.
 1200 488d3d1e 0e0000e8 84feffff b8010000  H.=.............
 1210 00eb05b8 00000000 488b4df8 6448330c  ........H.M.dH3.
 1220 25280000 007405e8 44feffff c9c36690  %(...t..D.....f.
 1230 f30f1efa 41574c8d 3d6b2b00 00415649  ....AWL.=k+..AVI
 1240 89d64155 4989f541 544189fc 55488d2d  ..AUI..ATA..UH.-
 1250 5c2b0000 534c29fd 4883ec08 e89ffdff  \+..SL).H.......
 1260 ff48c1fd 03741f31 db0f1f80 00000000  .H...t.1........
 1270 4c89f24c 89ee4489 e741ff14 df4883c3  L..L..D..A...H..
 1280 014839dd 75ea4883 c4085b5d 415c415d  .H9.u.H...[]A\A]
 1290 415e415f c366662e 0f1f8400 00000000  A^A_.ff.........
 12a0 f30f1efa c3                          .....           
Contents of section .fini:
 12a8 f30f1efa 4883ec08 4883c408 c3        ....H...H....   
Contents of section .rodata:
 2000 01000200 2e2f686f 626a6475 6d70002d  ...../hobjdump.-
 2010 73660000 2f757372 2f62696e 2f6f626a  sf../usr/bin/obj
 2020 64756d70 00657865 637600             dump.execv.     
Contents of section .eh_frame_hdr:
 202c 011b033b 40000000 07000000 f4efffff  ...;@...........
 203c 74000000 34f0ffff 9c000000 44f0ffff  t...4.......D...
 204c b4000000 74f0ffff 5c000000 5df1ffff  ....t...\...]...
 205c cc000000 04f2ffff ec000000 74f2ffff  ............t...
 206c 34010000                             4...            
Contents of section .eh_frame:
 2070 14000000 00000000 017a5200 01781001  .........zR..x..
 2080 1b0c0708 90010000 14000000 1c000000  ................
 2090 10f0ffff 2f000000 00440710 00000000  ..../....D......
 20a0 24000000 34000000 78efffff 40000000  $...4...x...@...
 20b0 000e1046 0e184a0f 0b770880 003f1a3a  ...F..J..w...?.:
 20c0 2a332422 00000000 14000000 5c000000  *3$"........\...
 20d0 90efffff 10000000 00000000 00000000  ................
 20e0 14000000 74000000 88efffff 30000000  ....t.......0...
 20f0 00000000 00000000 1c000000 8c000000  ................
 2100 89f0ffff a5000000 00450e10 8602430d  .........E....C.
 2110 06029c0c 07080000 44000000 ac000000  ........D.......
 2120 10f1ffff 65000000 00460e10 8f02490e  ....e....F....I.
 2130 188e0345 0e208d04 450e288c 05440e30  ...E. ..E.(..D.0
 2140 8606480e 38830747 0e406e0e 38410e30  ..H.8..G.@n.8A.0
 2150 410e2842 0e20420e 18420e10 420e0800  A.(B. B..B..B...
 2160 10000000 f4000000 38f1ffff 05000000  ........8.......
 2170 00000000 00000000                    ........        
Contents of section .init_array:
 3da8 80110000 00000000                    ........        
Contents of section .fini_array:
 3db0 40110000 00000000                    @.......        
Contents of section .dynamic:
 3db8 01000000 00000000 01000000 00000000  ................
 3dc8 0c000000 00000000 00100000 00000000  ................
 3dd8 0d000000 00000000 a8120000 00000000  ................
 3de8 19000000 00000000 a83d0000 00000000  .........=......
 3df8 1b000000 00000000 08000000 00000000  ................
 3e08 1a000000 00000000 b03d0000 00000000  .........=......
 3e18 1c000000 00000000 08000000 00000000  ................
 3e28 f5feff6f 00000000 a0030000 00000000  ...o............
 3e38 05000000 00000000 a0040000 00000000  ................
 3e48 06000000 00000000 c8030000 00000000  ................
 3e58 0a000000 00000000 a6000000 00000000  ................
 3e68 0b000000 00000000 18000000 00000000  ................
 3e78 15000000 00000000 00000000 00000000  ................
 3e88 03000000 00000000 a83f0000 00000000  .........?......
 3e98 02000000 00000000 48000000 00000000  ........H.......
 3ea8 14000000 00000000 07000000 00000000  ................
 3eb8 17000000 00000000 48060000 00000000  ........H.......
 3ec8 07000000 00000000 88050000 00000000  ................
 3ed8 08000000 00000000 c0000000 00000000  ................
 3ee8 09000000 00000000 18000000 00000000  ................
 3ef8 1e000000 00000000 08000000 00000000  ................
 3f08 fbffff6f 00000000 01000008 00000000  ...o............
 3f18 feffff6f 00000000 58050000 00000000  ...o....X.......
 3f28 ffffff6f 00000000 01000000 00000000  ...o............
 3f38 f0ffff6f 00000000 46050000 00000000  ...o....F.......
 3f48 f9ffff6f 00000000 03000000 00000000  ...o............
 3f58 00000000 00000000 00000000 00000000  ................
 3f68 00000000 00000000 00000000 00000000  ................
 3f78 00000000 00000000 00000000 00000000  ................
 3f88 00000000 00000000 00000000 00000000  ................
 3f98 00000000 00000000 00000000 00000000  ................
Contents of section .got:
 3fa8 b83d0000 00000000 00000000 00000000  .=..............
 3fb8 00000000 00000000 30100000 00000000  ........0.......
 3fc8 40100000 00000000 50100000 00000000  @.......P.......
 3fd8 00000000 00000000 00000000 00000000  ................
 3fe8 00000000 00000000 00000000 00000000  ................
 3ff8 00000000 00000000                    ........        
Contents of section .data:
 4000 00000000 00000000 08400000 00000000  .........@......
Contents of section .comment:
 0000 4743433a 20285562 756e7475 20382e34  GCC: (Ubuntu 8.4
 0010 2e302d33 7562756e 74753229 20382e34  .0-3ubuntu2) 8.4
 0020 2e3000                               .0.
 ```

Enjoy `:)`!